{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/page/admin.property.booleanconditional.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","booleanConditional","document","querySelector","allowableOperators","allowableIdentifiers","getOperator","operatorName","filter","operator","getOperatorProperty","getIdentifier","identifierName","identifier","getIdentifierProperty","createSelect","values","selectedValue","selectElement","forEach","item","label","createIdentifier","condition","conditionId","map","fullTitle","asIsOperators","createOperator","type","negated","enums","includes","operators","createValue","valueName","undefined","createAnswer","endsWith","conditionsLabel","all","any","exactly","conditionsDelimiter","conditionsType","keys","createConditionsType","currentType","conditionsTypeName","conditionType","createConditions","conditions","conditionsId","conditionIdCounter","conditionParts","newConditionId","noDelete","length","createCondition","conditionsRevert","addCondition","join","valueControl","style","display","JSON","parse","stringify","conditionRemove","conditionConvert","insertAdjacentHTML","conditionContainer","conditionsToggler","jsonMode","uiImpossible","updateConditions","renderedCondition","innerHTML","showJSONMode","showJSON","uiDisplay","jsonDisplay","toggleLabel","addEventListener","e","target","targetDestination","getAttribute","targetAction","getValueDestination","push","targetIndex","replace","m1","splice","destination","destinationValue","targetValue","split","valueDestination","startsWith","substr","currentValue","numberValue","Number","isNaN","updateValueControl","formElements","forms","elements","unescape","reverse","allowableOperatorsIn","operatorValues","yes","no","parentNode","insertBefore","nextSibling","eval","input","booleanConditionalNodeList","booleanConditionalOptions","typeValue","toString","classList","remove","index","this"],"mappings":"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","file":"page/admin.property.booleanconditional-0.0.169.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","\n// (() => {\n\nconst booleanConditional = document.querySelector('.booleanConditionalOptions')\nif (!booleanConditional) {\n  // return\n}\nlet allowableOperators\nlet allowableIdentifiers\n\nconst getOperator = (operatorName) => {\n  return allowableOperators.filter(operator => operator.operator === operatorName)[0] || {}\n}\nconst getOperatorProperty = (operatorName, property) => getOperator(operatorName)[property]\nconst getIdentifier = (identifierName) => {\n  return allowableIdentifiers.filter(identifier => identifier.name === identifierName)[0] || {}\n}\nconst getIdentifierProperty = (identifierName, property) => getIdentifier(identifierName)[property]\n\nconst createSelect = (name, values, selectedValue) => {\n  let selectElement = `<select name=\"${name}\" class=\"govuk-select\" style=\"width:auto; min-width: 10rem; max-width:100%; display:block;margin-bottom: 0.5rem;\"><option value=\"\"></option>`\n  values.forEach(item => {\n    selectElement += `<option value=\"${item.value}\"${selectedValue === item.value ? ' selected' : ''}>${item.label}</option>`\n  })\n  selectElement += '<select>'\n  return selectElement\n}\n\nconst createIdentifier = (condition, conditionId) => {\n  const {identifier} = condition\n  const values = allowableIdentifiers.map(item => {\n    return {\n      value: item.name,\n      label: item.fullTitle // + ' (' + item.name + ')'\n    }\n  })\n  const identifierElement = createSelect(`identifier===${conditionId}`, values, identifier)\n  return identifierElement\n}\n\nconst asIsOperators = [\n  'boolean',\n  'date',\n  'number'\n]\nconst createOperator = (condition, conditionId) => {\n  let {identifier, operator, type, negated, enums} = condition\n  if (!identifier) {\n    return ''\n  }\n  if (negated) {\n    operator = `!${operator}`\n  }\n  type = getIdentifierProperty(identifier, 'type')\n  if (!asIsOperators.includes(type)) {\n    type = 'string'\n  }\n  const operators = allowableOperators.filter(operator => {\n    if (!operator.type) {\n      return true\n    }\n    const enumsMatch = true\n    if (enums) {\n      // enumsMatch = operator.operator === 'is' || operator.operator === 'equals' || operator.operator === 'defined'\n    }\n    const typeMatch = operator.type === 'any' || operator.type === type\n    return typeMatch && enumsMatch\n  })\n  const operatorElement = createSelect(`operator===${conditionId}`, operators, operator)\n  return operatorElement\n}\n\nconst createValue = (condition, conditionId) => {\n  const {identifier, operator, value, enums} = condition\n  if (!operator || operator === 'defined' || operator === 'isTrue') {\n    return ''\n  }\n  let valueElement\n  const valueName = `value===${conditionId}`\n  if (enums && (operator === 'is' || operator === 'equals' || operator === 'defined')) {\n    valueElement = createSelect(valueName, enums, value)\n  } else {\n    valueElement = `<input type=\"text\" name=\"${valueName}\" value=\"${value === undefined ? '' : value}\" class=\"govuk-input\" style=\"width:10em;\">`\n  }\n  return valueElement\n}\n\nconst createAnswer = (condition) => {\n  const {identifier} = condition\n  const answerElement = identifier && identifier.endsWith('[*]') ? 'any answer for' : 'the answer for'\n  return answerElement\n}\n\nconst conditionsLabel = {\n  all: 'all these conditions are met',\n  any: 'at least one of these conditons is met',\n  exactly: 'one of these conditions is met'\n}\nconst conditionsDelimiter = {\n  all: 'and',\n  any: 'and/or',\n  exactly: 'or'\n}\nconst conditionsType = Object.keys(conditionsLabel)\n\nconst createConditionsType = (currentType, conditionId) => {\n  const conditionsTypeName = `conditionsType===${conditionId}`\n  const enums = conditionsType.map(conditionType => {\n    return {\n      label: conditionsLabel[conditionType],\n      value: conditionType\n    }\n  })\n  const valueElement = createSelect(conditionsTypeName, enums, currentType)\n  return valueElement\n}\nconst createConditions = (conditions, conditionId = '', type) => {\n  const conditionsId = `${conditionId}.${type}`\n  let conditionIdCounter = 0\n  const conditionParts = conditions.map(condition => {\n    const newConditionId = `${conditionsId}[${conditionIdCounter}]`\n    conditionIdCounter++\n    const noDelete = conditions.length === 1\n    return createCondition(condition, newConditionId, noDelete)\n  })\n  const conditionsRevert = conditions.length === 1 ? `<p class=\"govuk-button fb-action-secondary fb-action--revert-conditions condition-action condition-revert\" data-destination=\"${conditionsId}\" data-action=\"revert\">Convert to single condition</p>` : ''\n  const conditionsType = createConditionsType(type, conditionId)\n  const addCondition = `<p class=\"govuk-button fb-action-secondary fb-action--add fb-action--add-condition conditionsAdd\" data-action=\"add\" data-destination=\"${conditionsId}\">Add condition</p>`\n  return `<div class=\"conditions-block\" >${conditionsType}${conditionsRevert}<div class=\"conditions-subconditions\">${conditionParts.join(`<p class=\"conditions-delimiter\">${conditionsDelimiter[type]}</p>`)}${addCondition}</div></div>`\n}\n\nlet valueControl\nconst createCondition = (condition, conditionId = '', noDelete) => {\n  if (typeof condition !== 'object') {\n    valueControl.style.display = 'none'\n    return ''\n  }\n  condition = JSON.parse(JSON.stringify(condition))\n  const {all, any, exactly} = condition\n  if (all) {\n    return createConditions(all, conditionId, 'all')\n  }\n  if (any) {\n    return createConditions(any, conditionId, 'any')\n  }\n  if (exactly) {\n    return createConditions(exactly, conditionId, 'exactly')\n  }\n  // console.log('conditionId', conditionId)\n  const {identifier, operator, value, negated} = condition\n  const enums = allowableIdentifiers.filter(item => item.name === identifier).map(item => item.enums)[0]\n  condition.enums = enums\n  let conditionRemove = ''\n  if (conditionId !== '' && !noDelete) {\n    conditionRemove = `<p class=\"govuk-button fb-action-secondary fb-action--remove-condition condition-action condition-remove\" data-destination=\"${conditionId}\" data-action=\"remove\">Delete</p>`\n  }\n  const conditionConvert = `<p class=\"govuk-button fb-action-secondary fb-action--convert-condition condition-action condition-convert\" data-destination=\"${conditionId || 'TOP'}\" data-action=\"convert\">Convert to multiple conditions</p>`\n  if (identifier !== 'undefined') {\n    return `<div class=\"condition-individual\">${createAnswer(condition)} ${createIdentifier(condition, conditionId)} ${createOperator(condition, conditionId)} ${createValue(condition, conditionId)}${conditionRemove}${conditionConvert}</div>`\n  } else {\n\n  }\n}\n\n// const valueGroup = document.querySelector('[data-block-id=\"admin.instance.property--value\"]')\n// valueGroup.classList.add('js-hidden')\n\nbooleanConditional.insertAdjacentHTML('afterend', '<div id=\"conditions\"></div><p id=\"conditionsToggle\"><span class=\"govuk-button fb-action-secondary\"></span></p>')\n\nconst conditionContainer = document.querySelector('#conditions')\nconst conditionsToggler = document.querySelector('#conditionsToggle .fb-action-secondary')\n\nlet jsonMode = false\nlet uiImpossible = false\n\nconst updateConditions = (condition) => {\n  const renderedCondition = createCondition(condition)\n  if (renderedCondition !== undefined) {\n    uiImpossible = false\n    conditionContainer.innerHTML = renderedCondition\n    showJSONMode(jsonMode)\n  } else {\n    uiImpossible = true\n    showJSONMode(true)\n  }\n}\nconst showJSONMode = (showJSON) => {\n  jsonMode = !!showJSON\n  let uiDisplay = ''\n  let jsonDisplay = 'none'\n  let toggleLabel = 'Edit JSON'\n  if (showJSON) {\n    uiDisplay = 'none'\n    jsonDisplay = ''\n    toggleLabel = 'Edit with UI'\n  }\n  if (uiImpossible) {\n    toggleLabel = 'Cannot show JSON structure through UI'\n  }\n  conditionContainer.style.display = uiDisplay\n  valueControl.style.display = jsonDisplay\n  conditionsToggler.innerHTML = toggleLabel\n}\nconditionsToggler.addEventListener('click', () => {\n  if (uiImpossible) {\n    return\n  }\n  showJSONMode(!jsonMode)\n})\n\nconditionContainer.addEventListener('click', function (e) {\n  const target = e.target\n  let targetDestination = target.getAttribute('data-destination')\n  if (!targetDestination) {\n    return\n  }\n  const targetAction = target.getAttribute('data-action')\n  if (targetAction === 'add') {\n    const destination = getValueDestination(targetDestination)\n    destination.push({})\n  } else if (targetAction === 'remove') {\n    let targetIndex\n    targetDestination = targetDestination.replace(/\\[(\\d+)\\]$/, (m, m1) => {\n      targetIndex = m1\n      return ''\n    })\n    const destination = getValueDestination(targetDestination)\n    destination.splice(targetIndex, 1)\n  } else if (targetAction === 'convert') {\n    if (targetDestination === 'TOP') {\n      targetDestination = ''\n    }\n    const destination = getValueDestination(targetDestination)\n    const destinationValue = JSON.parse(JSON.stringify(destination))\n    Object.keys(destination).forEach(key => {\n      delete destination[key]\n    })\n    destination.all = [destinationValue]\n  } else if (targetAction === 'revert') {\n    const destinationValue = getValueDestination(targetDestination)\n    const destination = getValueDestination(targetDestination.replace(/\\.[^.]+$/, ''))\n    Object.keys(destination).forEach(key => {\n      delete destination[key]\n    })\n    Object.keys(destinationValue).forEach(key => {\n      destination[key] = destinationValue[key]\n    })\n  }\n  updateConditions(value)\n})\nconditionContainer.addEventListener('change', function (e) {\n  const target = e.target\n  let targetValue = target.value\n  let [name, destination] = target.name.split('===')\n  destination = destination || ''\n  const valueDestination = getValueDestination(destination)\n  if (name === 'identifier') {\n    delete valueDestination.operator\n    delete valueDestination.value\n  } else if (name === 'operator') {\n    if (targetValue.startsWith('!')) {\n      targetValue = targetValue.substr(1)\n      valueDestination.negated = true\n    } else {\n      delete valueDestination.negated\n    }\n    if (targetValue === 'defined' || targetValue === 'isTrue') {\n      delete valueDestination.value\n    }\n  } else if (name === 'conditionsType') {\n    let currentValue = []\n    conditionsType.forEach(type => {\n      if (valueDestination[type]) {\n        currentValue = valueDestination[type]\n        delete valueDestination[type]\n      }\n    })\n    valueDestination[targetValue] = currentValue\n  }\n  if (name === 'value' && targetValue !== '') {\n    const valueType = getOperatorProperty(value.operator, 'type')\n    // allowableOperators.filter(operator => operator.operator === value.operator)[0].type\n    if (valueType === 'number') {\n      const numberValue = Number(targetValue)\n      if (!isNaN(numberValue)) {\n        targetValue = numberValue\n      }\n    }\n  }\n  valueDestination[name] = targetValue\n  updateValueControl('condition')\n  updateConditions(value)\n})\n\nconst formElements = document.forms[0].elements\n\nallowableIdentifiers = JSON.parse(unescape(formElements.booleanConditional.value)).reverse()\n\nconst allowableOperatorsIn = JSON.parse(unescape(formElements.allowableOperators.value))\nallowableOperators = []\nObject.keys(allowableOperatorsIn).forEach(key => {\n  const operatorValues = allowableOperatorsIn[key]\n  const type = operatorValues.type\n  allowableOperators.push({\n    operator: key,\n    type,\n    value: key,\n    label: operatorValues.yes\n  })\n  allowableOperators.push({\n    operator: key,\n    type,\n    value: `!${key}`,\n    label: operatorValues.no\n  })\n})\n\nvalueControl = formElements.value\nvalueControl.addEventListener('change', () => {\n  value = JSON.parse(valueControl.value)\n  updateConditions(value)\n})\n\nconditionContainer.parentNode.insertBefore(valueControl, conditionContainer.nextSibling)\n\nlet value = valueControl.value ? JSON.parse(valueControl.value) : valueControl.value\n\nconst getValueDestination = (destination) => {\n  let valueDestination\n  eval(`valueDestination = value${destination}`)\n  return valueDestination\n}\n\nconst updateValueControl = (input) => {\n  if (input === 'condition') {\n    value = value || {identifier: '', operator: ''}\n    input = JSON.stringify(value, null, 2)\n  } else {\n    value = undefined\n  }\n  valueControl.value = input\n}\n\nconst booleanConditionalNodeList = formElements.booleanConditionalOptions\n\nconst typeValue = typeof value === 'boolean' ? value.toString() : 'condition'\nif (typeof value === 'boolean') {\n  value = undefined\n}\n\nbooleanConditionalNodeList.value = typeValue\n\nbooleanConditional.classList.remove('js-hidden')\n\nfor (let index = 0; index < 3; index++) {\n  booleanConditionalNodeList.item(index).addEventListener('change', function () {\n    updateValueControl(this.value)\n    updateConditions(value)\n  })\n}\n\nif (typeof value === 'object') {\n  updateConditions(value)\n} else {\n  valueControl.style.display = 'none'\n}\n// })()\n"],"sourceRoot":""}